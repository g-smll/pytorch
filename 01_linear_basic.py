import torch
import torch.nn as nn

print("=== Linearå±‚æ•°å­¦å…¬å¼ä¸å’–å•¡åº—å®šä»·çš„å¯¹åº”å…³ç³» ===\n")

print("ğŸ“ Linearå±‚çš„æ•°å­¦å…¬å¼ï¼š")
print("y = xâ‚Ã—wâ‚ + xâ‚‚Ã—wâ‚‚ + xâ‚ƒÃ—wâ‚ƒ + xâ‚„Ã—wâ‚„ + b")
print("æˆ–å†™æˆï¼šy = XÂ·W + b\n")

# é‡æ–°åˆ›å»ºå®šä»·æ¨¡å‹ï¼Œå¹¶è¯¦ç»†æ ‡æ³¨æ¯ä¸ªå‚æ•°
pricing_model = nn.Linear(4, 1)
pricing_model.weight.data = torch.tensor([[1.0, 0.5, 0.3, 0.2]])
pricing_model.bias.data = torch.tensor([5.0])

print("ğŸ” å…·ä½“å¯¹åº”å…³ç³»ï¼š")
print("â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
print("â”‚   æ•°å­¦å…¬å¼ç¬¦å·   â”‚    å’–å•¡åº—ä¸šåŠ¡    â”‚     å…·ä½“æ•°å€¼     â”‚")
print("â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤")
print("â”‚ xâ‚ (è¾“å…¥1)      â”‚   å’–å•¡è±†æˆæœ¬     â”‚    8.0 å…ƒ/æ¯    â”‚")
print("â”‚ xâ‚‚ (è¾“å…¥2)      â”‚   åº—é“ºç¹å¿™ç¨‹åº¦   â”‚    3-10 åˆ†      â”‚")
print("â”‚ xâ‚ƒ (è¾“å…¥3)      â”‚   å¤©æ°”å¥½å      â”‚    2-10 åˆ†      â”‚")
print("â”‚ xâ‚„ (è¾“å…¥4)      â”‚   ç«äº‰å¯¹æ‰‹ä»·æ ¼   â”‚    25-30 å…ƒ     â”‚")
print("â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤")
print("â”‚ wâ‚ (æƒé‡1)      â”‚   æˆæœ¬ç³»æ•°      â”‚     1.0         â”‚")
print("â”‚ wâ‚‚ (æƒé‡2)      â”‚   ç¹å¿™åŠ ä»·ç³»æ•°   â”‚     0.5         â”‚")
print("â”‚ wâ‚ƒ (æƒé‡3)      â”‚   å¤©æ°”åŠ ä»·ç³»æ•°   â”‚     0.3         â”‚")
print("â”‚ wâ‚„ (æƒé‡4)      â”‚   ç«äº‰å‚è€ƒç³»æ•°   â”‚     0.2         â”‚")
print("â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤")
print("â”‚ b (åç½®)        â”‚   åŸºç¡€åˆ©æ¶¦      â”‚     5.0 å…ƒ      â”‚")
print("â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤")
print("â”‚ y (è¾“å‡º)        â”‚   æœ€ç»ˆå”®ä»·      â”‚   è®¡ç®—ç»“æœ å…ƒ    â”‚")
print("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n")

# ç”¨ä¸€ä¸ªå…·ä½“ä¾‹å­æ¼”ç¤ºè®¡ç®—è¿‡ç¨‹
print("ğŸ“ å…·ä½“è®¡ç®—ç¤ºä¾‹ï¼ˆå‘¨äº”ä¸‹åˆåœºæ™¯ï¼‰ï¼š")
print("è¾“å…¥æ•°æ®ï¼š[æˆæœ¬8å…ƒ, ç¹å¿™8åˆ†, å¤©æ°”9åˆ†, å¯¹æ‰‹ä»·25å…ƒ]\n")

# è¾“å…¥å€¼
cost = 8.0      # xâ‚
busy = 8.0      # xâ‚‚  
weather = 9.0   # xâ‚ƒ
competitor = 25.0  # xâ‚„

# æƒé‡å€¼
w1 = pricing_model.weight.data[0][0].item()  # 1.0
w2 = pricing_model.weight.data[0][1].item()  # 0.5
w3 = pricing_model.weight.data[0][2].item()  # 0.3
w4 = pricing_model.weight.data[0][3].item()  # 0.2

# åç½®å€¼
bias = pricing_model.bias.data[0].item()     # 5.0

print("ğŸ§® é€æ­¥è®¡ç®—è¿‡ç¨‹ï¼š")
print(f"xâ‚ Ã— wâ‚ = {cost} Ã— {w1} = {cost * w1}")
print(f"xâ‚‚ Ã— wâ‚‚ = {busy} Ã— {w2} = {busy * w2}")  
print(f"xâ‚ƒ Ã— wâ‚ƒ = {weather} Ã— {w3} = {weather * w3}")
print(f"xâ‚„ Ã— wâ‚„ = {competitor} Ã— {w4} = {competitor * w4}")
print(f"åç½® b = {bias}")

# æ‰‹åŠ¨è®¡ç®—
manual_result = cost*w1 + busy*w2 + weather*w3 + competitor*w4 + bias
print(f"\næ€»å’Œï¼š{cost*w1} + {busy*w2} + {weather*w3} + {competitor*w4} + {bias} = {manual_result}")

# ç”¨Linearå±‚éªŒè¯
input_tensor = torch.tensor([[cost, busy, weather, competitor]])
model_result = pricing_model(input_tensor)
print(f"Linearå±‚è®¡ç®—ç»“æœï¼š{model_result.item():.1f}å…ƒ")
print(f"æ‰‹åŠ¨è®¡ç®—ç»“æœï¼š{manual_result:.1f}å…ƒ")
print(f"ç»“æœä¸€è‡´ï¼š{abs(model_result.item() - manual_result) < 0.01} âœ“\n")

print("ğŸ¯ å…³é”®ç†è§£ç‚¹ï¼š")
print("1ï¸âƒ£ è¾“å…¥å‘é‡ X = [8.0, 8.0, 9.0, 25.0]")
print("   ä»£è¡¨ï¼š[æˆæœ¬, ç¹å¿™åº¦, å¤©æ°”, å¯¹æ‰‹ä»·]")

print("\n2ï¸âƒ£ æƒé‡å‘é‡ W = [1.0, 0.5, 0.3, 0.2]") 
print("   ä»£è¡¨ï¼šå„å› ç´ å¯¹æœ€ç»ˆä»·æ ¼çš„å½±å“ç¨‹åº¦")
print("   â€¢ æˆæœ¬å½±å“æœ€å¤§(1.0) - ç›´æ¥å…³ç³»")
print("   â€¢ ç¹å¿™åº¦å…¶æ¬¡(0.5) - ä¸­ç­‰å½±å“")  
print("   â€¢ å¤©æ°”å½±å“å°(0.3) - è½»å¾®å½±å“")
print("   â€¢ å¯¹æ‰‹ä»·å½±å“æœ€å°(0.2) - å‚è€ƒä½œç”¨")

print("\n3ï¸âƒ£ åç½® b = 5.0")
print("   ä»£è¡¨ï¼šä¸ç®¡ä»€ä¹ˆæƒ…å†µéƒ½è¦ä¿è¯çš„åŸºç¡€åˆ©æ¶¦")

print("\n4ï¸âƒ£ è¾“å‡º y = å”®ä»·")
print("   ä»£è¡¨ï¼šAIç»™å‡ºçš„æœ€ç»ˆå®šä»·å»ºè®®\n")

print("ğŸ’¡ ä¸šåŠ¡å«ä¹‰æ€»ç»“ï¼š")
print("Linearå±‚æŠŠ'ä¸“å®¶çš„å®šä»·ç»éªŒ'è½¬åŒ–ä¸º'å¯è®¡ç®—çš„æ•°å­¦å…¬å¼'")
print("â€¢ æƒé‡ = å„å› ç´ çš„é‡è¦æ€§æƒè¡¡")
print("â€¢ åç½® = åº•çº¿è¦æ±‚ï¼ˆå¿…é¡»ç›ˆåˆ©ï¼‰")
print("â€¢ è¾“å…¥ = å½“å‰çš„å®é™…æƒ…å†µ")
print("â€¢ è¾“å‡º = æ™ºèƒ½å®šä»·å»ºè®®")

print(f"\nğŸ”§ å‚æ•°å­˜å‚¨ä½ç½®ï¼š")
print(f"æƒé‡çŸ©é˜µï¼špricing_model.weight.data = {pricing_model.weight.data}")
print(f"åç½®å‘é‡ï¼špricing_model.bias.data = {pricing_model.bias.data}")
print("è¿™äº›å‚æ•°å¯ä»¥æ ¹æ®å®é™…ç»è¥æƒ…å†µè°ƒæ•´ï¼")

# ä¸šåŠ¡åœºæ™¯æµ‹è¯•éƒ¨åˆ†
print("\n" + "="*60)
print("=== ä¸šåŠ¡ç›®æ ‡ï¼šæ™ºèƒ½å’–å•¡åº—å®šä»·ç³»ç»Ÿ ===\n")

print("ğŸ¯ ä¸šåŠ¡èƒŒæ™¯ï¼š")
print("ä½ å¼€äº†ä¸€å®¶å’–å•¡åº—ï¼Œæƒ³è¦æ ¹æ®ä¸åŒå› ç´ è‡ªåŠ¨å®šä»·")
print("ç›®æ ‡ï¼šè®©AIå­¦ä¼šåˆç†å®šä»·ï¼Œæ—¢èƒ½å¸å¼•é¡¾å®¢åˆèƒ½ä¿è¯åˆ©æ¶¦\n")

print("ğŸ“Š å½±å“å®šä»·çš„å› ç´ ï¼š")
print("1. å’–å•¡è±†æˆæœ¬ï¼ˆå…ƒ/æ¯ï¼‰")
print("2. åº—é“ºç¹å¿™ç¨‹åº¦ï¼ˆ1-10åˆ†ï¼‰") 
print("3. å¤©æ°”å¥½åï¼ˆ1-10åˆ†ï¼Œå¤©æ°”å¥½å®¢äººå¤šï¼‰")
print("4. ç«äº‰å¯¹æ‰‹ä»·æ ¼ï¼ˆå…ƒ/æ¯ï¼‰\n")

print("ğŸ’¡ ä¸šåŠ¡é€»è¾‘ï¼ˆä¸“å®¶ç»éªŒï¼‰ï¼š")
print("â€¢ æˆæœ¬è¶Šé«˜ï¼Œå®šä»·è¶Šé«˜ï¼ˆ1:1æ¯”ä¾‹ï¼‰")
print("â€¢ åº—é“ºè¶Šå¿™ï¼Œå¯ä»¥é€‚å½“æ¶¨ä»·ï¼ˆæ¯åˆ†+0.5å…ƒï¼‰")
print("â€¢ å¤©æ°”è¶Šå¥½ï¼Œå®¢äººè¶Šå¤šï¼Œå¯ä»¥æ¶¨ä»·ï¼ˆæ¯åˆ†+0.3å…ƒï¼‰") 
print("â€¢ ç«äº‰å¯¹æ‰‹ä»·æ ¼é«˜ï¼Œæˆ‘ä»¬å¯ä»¥ç¨å¾®æ¶¨ä»·ï¼ˆ0.2å€å…³ç³»ï¼‰")
print("â€¢ åŸºç¡€åˆ©æ¶¦ï¼šæ¯æ¯è‡³å°‘èµš5å…ƒ\n")

print("ğŸ“‹ å®é™…ä¸šåŠ¡åœºæ™¯æµ‹è¯•ï¼š")
scenarios = [
    {
        "name": "å‘¨ä¸€æ—©æ™¨",
        "factors": [8.0, 3.0, 6.0, 25.0],  # [æˆæœ¬, ç¹å¿™åº¦, å¤©æ°”, å¯¹æ‰‹ä»·]
        "description": "æˆæœ¬8å…ƒï¼Œä¸å¤ªå¿™(3åˆ†)ï¼Œå¤©æ°”ä¸€èˆ¬(6åˆ†)ï¼Œå¯¹æ‰‹25å…ƒ"
    },
    {
        "name": "å‘¨äº”ä¸‹åˆ",  
        "factors": [8.0, 8.0, 9.0, 25.0],
        "description": "æˆæœ¬8å…ƒï¼Œå¾ˆå¿™(8åˆ†)ï¼Œå¤©æ°”å¾ˆå¥½(9åˆ†)ï¼Œå¯¹æ‰‹25å…ƒ"
    },
    {
        "name": "é›¨å¤©ä¸Šåˆ",
        "factors": [8.0, 2.0, 2.0, 25.0], 
        "description": "æˆæœ¬8å…ƒï¼Œå¾ˆé—²(2åˆ†)ï¼Œä¸‹é›¨(2åˆ†)ï¼Œå¯¹æ‰‹25å…ƒ"
    },
    {
        "name": "èŠ‚å‡æ—¥",
        "factors": [10.0, 10.0, 10.0, 30.0],
        "description": "æˆæœ¬10å…ƒï¼Œè¶…å¿™(10åˆ†)ï¼Œå¤©æ°”æå¥½(10åˆ†)ï¼Œå¯¹æ‰‹30å…ƒ"
    }
]

print("æƒ…å†µåˆ†æå’Œå®šä»·å†³ç­–ï¼š")
for scenario in scenarios:
    # è¾“å…¥ä¸šåŠ¡æ•°æ®
    factors = torch.tensor([scenario["factors"]])
    suggested_price = pricing_model(factors)
    
    # ä¸šåŠ¡åˆ†æ
    cost, busy, weather, competitor = scenario["factors"]
    profit = suggested_price.item() - cost
    
    print(f"\nğŸ“… {scenario['name']}ï¼š")
    print(f"   {scenario['description']}")
    print(f"   AIå»ºè®®å”®ä»·ï¼š{suggested_price.item():.1f}å…ƒ")
    print(f"   é¢„æœŸåˆ©æ¶¦ï¼š{profit:.1f}å…ƒ")
    
    # ä¸šåŠ¡åˆ¤æ–­
    if profit < 3:
        print("   âš ï¸  åˆ©æ¶¦åä½ï¼Œéœ€è¦è°ƒæ•´ç­–ç•¥")
    elif profit > 8:
        print("   ğŸ’° åˆ©æ¶¦å¾ˆå¥½ï¼Œä½†è¦æ³¨æ„å®¢æˆ·æ¥å—åº¦")
    else:
        print("   âœ… åˆ©æ¶¦åˆç†ï¼Œä»·æ ¼æœ‰ç«äº‰åŠ›")

print("\n" + "="*50)

print("\nğŸ¯ ä¸šåŠ¡ä»·å€¼ä½“ç°ï¼š")
print("1. ğŸ“ˆ åŠ¨æ€å®šä»·ï¼šæ ¹æ®å®æ—¶æƒ…å†µè°ƒæ•´ä»·æ ¼")
print("2. ğŸ§  ä¸“å®¶çŸ¥è¯†ï¼šæŠŠä¸šåŠ¡ç»éªŒè½¬åŒ–ä¸ºæ•°å­¦æ¨¡å‹") 
print("3. âš¡ å¿«é€Ÿå“åº”ï¼šç§’çº§è®¡ç®—å‡ºåˆç†ä»·æ ¼")
print("4. ğŸ’¡ æ•°æ®é©±åŠ¨ï¼šåŸºäºå¤šä¸ªå› ç´ ç»¼åˆå†³ç­–")

print("\nğŸ”„ æŒç»­ä¼˜åŒ–æ–¹å‘ï¼š")
print("â€¢ æ”¶é›†å®é™…é”€å”®æ•°æ®")
print("â€¢ æ ¹æ®é”€é‡åé¦ˆè°ƒæ•´æƒé‡")  
print("â€¢ å¢åŠ æ›´å¤šå½±å“å› ç´ ï¼ˆå¦‚é¡¾å®¢æ•°é‡ã€åº“å­˜ç­‰ï¼‰")
print("â€¢ è®¾ç½®ä»·æ ¼ä¸Šä¸‹é™é¿å…æç«¯æƒ…å†µ")

print("\nğŸ’¼ Linearå±‚åœ¨è¿™é‡Œçš„ä½œç”¨ï¼š")
print("âœ“ æŠŠå¤æ‚çš„å®šä»·å†³ç­–ç®€åŒ–ä¸ºæ•°å­¦è®¡ç®—")
print("âœ“ è®©ä¸šåŠ¡é€»è¾‘å¯ä»¥é‡åŒ–å’Œè°ƒæ•´")
print("âœ“ ä¸ºåç»­çš„æœºå™¨å­¦ä¹ ä¼˜åŒ–æ‰“åŸºç¡€")
print("âœ“ ç¡®ä¿å®šä»·çš„ä¸€è‡´æ€§å’Œå¯è§£é‡Šæ€§")

print("\nğŸš€ ä¸‹ä¸€æ­¥ä¸šåŠ¡æ‰©å±•ï¼š")
print("â€¢ å¯ä»¥è®­ç»ƒè¿™ä¸ªæ¨¡å‹å­¦ä¹ å†å²æœ€ä¼˜å®šä»·")
print("â€¢ å¯ä»¥æ·»åŠ æ›´å¤šLayerå¤„ç†å¤æ‚çš„éçº¿æ€§å…³ç³»")
print("â€¢ å¯ä»¥å®æ—¶è°ƒæ•´å‚æ•°åº”å¯¹å¸‚åœºå˜åŒ–")

if __name__ == "__main__":
    print("\n" + "="*60)
    print("ç¨‹åºæ‰§è¡Œå®Œæˆï¼")
    print("è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†Linearå±‚å¦‚ä½•å°†ä¸šåŠ¡é€»è¾‘è½¬åŒ–ä¸ºå¯è®¡ç®—çš„æ•°å­¦æ¨¡å‹")